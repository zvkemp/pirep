import e from"../../lib/codemirror.js";(function(o){o(e)})((function(e){e.defineOption("placeholder","",(function(o,t,l){var n=l&&l!=e.Init;if(t&&!n){o.on("blur",onBlur);o.on("change",onChange);o.on("swapDoc",onChange);e.on(o.getInputField(),"compositionupdate",o.state.placeholderCompose=function(){onComposition(o)});onChange(o)}else if(!t&&n){o.off("blur",onBlur);o.off("change",onChange);o.off("swapDoc",onChange);e.off(o.getInputField(),"compositionupdate",o.state.placeholderCompose);clearPlaceholder(o);var r=o.getWrapperElement();r.className=r.className.replace(" CodeMirror-empty","")}t&&!o.hasFocus()&&onBlur(o)}));function clearPlaceholder(e){if(e.state.placeholder){e.state.placeholder.parentNode.removeChild(e.state.placeholder);e.state.placeholder=null}}function setPlaceholder(e){clearPlaceholder(e);var o=e.state.placeholder=document.createElement("pre");o.style.cssText="height: 0; overflow: visible";o.style.direction=e.getOption("direction");o.className="CodeMirror-placeholder CodeMirror-line-like";var t=e.getOption("placeholder");"string"==typeof t&&(t=document.createTextNode(t));o.appendChild(t);e.display.lineSpace.insertBefore(o,e.display.lineSpace.firstChild)}function onComposition(e){setTimeout((function(){var o=false;if(1==e.lineCount()){var t=e.getInputField();o="TEXTAREA"==t.nodeName?!e.getLine(0).length:!/[^\u200b]/.test(t.querySelector(".CodeMirror-line").textContent)}o?setPlaceholder(e):clearPlaceholder(e)}),20)}function onBlur(e){isEmpty(e)&&setPlaceholder(e)}function onChange(e){var o=e.getWrapperElement(),t=isEmpty(e);o.className=o.className.replace(" CodeMirror-empty","")+(t?" CodeMirror-empty":"");t?setPlaceholder(e):clearPlaceholder(e)}function isEmpty(e){return 1===e.lineCount()&&""===e.getLine(0)}}));var o={};export{o as default};

